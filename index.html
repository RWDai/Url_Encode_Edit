<!doctype html>
<html lang="zh-Hans">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>URL 编码结构化编辑器</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="app">
      <header>
        <p class="eyebrow">GitHub Pages · URL Encode/Decode</p>
        <h1>URL 编码结构化编辑器</h1>
        <p class="lede">
          输入一个完整的 URL，我们会自动拆解出协议、域名、端口、路径以及每个 Query 参数。
          任何部分修改后都会即时重新组合成 URL，并同步到上方输入框，实现真正的双向绑定。
        </p>
      </header>

      <section class="panel">
        <label class="field-label" for="urlInput">URL（可含编码）</label>
        <textarea
          id="urlInput"
          class="encoded-input"
          spellcheck="false"
          placeholder="例如：https://demo.example.com:8080/api/%E8%B5%84%E6%BA%90?name=%E5%BC%A0%E4%B8%89&description=%F0%9F%93%88+Docs&redirect=https%3A%2F%2Fexample.org%2Fcallback"
          aria-describedby="statusLine"
        ></textarea>
        <div id="statusLine" class="status-line" role="status" aria-live="polite"></div>
      </section>

      <section class="panel">
        <div class="panel-heading">
          <div>
            <h2>基础部分</h2>
            <p class="muted">协议、域名、端口和路径会组成 URL 的主体。</p>
          </div>
          <button id="resetSample" class="ghost-btn" type="button">填入示例</button>
        </div>
        <div class="base-grid">
          <label class="field-group">
            <span>协议</span>
            <input id="protocolField" type="text" data-field="protocol" placeholder="https" />
          </label>
          <label class="field-group">
            <span>域名</span>
            <input id="hostnameField" type="text" data-field="hostname" placeholder="demo.example.com" />
          </label>
          <label class="field-group">
            <span>端口</span>
            <input id="portField" type="text" data-field="port" placeholder="8443" inputmode="numeric" />
          </label>
          <label class="field-group path-field">
            <span>路径</span>
            <input id="pathnameField" type="text" data-field="pathname" placeholder="/sub" />
          </label>
        </div>
      </section>

      <section class="panel">
        <div class="panel-heading">
          <div>
            <h2>Query 参数</h2>
            <p class="muted">每一个参数都是独立的表单控件，支持 Emoji 与编码字符。</p>
          </div>
          <output id="queryCount" class="muted" for="queryList">0 个参数</output>
        </div>
        <div id="queryList" class="query-list" aria-live="polite"></div>
        <button id="addQuery" class="ghost-btn" type="button">新增参数</button>
      </section>
    </main>

    <template id="queryRowTemplate">
      <div class="query-row">
        <input class="query-input" name="key" placeholder="参数名" />
        <span class="eq">=</span>
        <textarea class="query-input query-value" name="value" placeholder="参数值" rows="1"></textarea>
        <button type="button" class="icon-btn" aria-label="删除参数">×</button>
      </div>
    </template>

    <script type="module" src="main.js"></script>
  </body>
</html>
